name: Check UUID validity

on: [push, pull_request]

jobs:
  uuid:
    runs-on: ubuntu-24.04
    steps:
    - uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683
    - run: sudo apt-get update && sudo apt-get install --yes jq
    - run: |
        bad_uuid=$(cat config.json | jq --raw-output '.exercises | map(.uuid) | .[]' | grep -vE '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$' || true)
        if [[ -n "$bad_uuid" ]]; then
          printf "Invalid UUID(s) found:"
          printf "%s" "${bad_uuid}"
          exit 1
        fi
